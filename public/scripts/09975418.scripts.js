"use strict";angular.module("champagneRocksApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/interactive",{templateUrl:"partials/interactive",controller:"InteractiveCtrl"}).when("/record",{templateUrl:"partials/record",controller:"MainCtrl"}).when("/cover",{templateUrl:"partials/cover",controller:"MainCtrl"}).when("/travel",{templateUrl:"partials/travel",controller:"MainCtrl"}).otherwise({redirectTo:"/record"}),b.html5Mode(!0)}]),angular.module("champagneRocksApp").controller("MainCtrl",["$scope","$http",function(){function a(){d=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),d.position.z=500,e=new THREE.Scene,g=new THREE.Object3D,g.position.y=-100,e.add(g),f=new THREE.CanvasRenderer,f.setClearColor(15790320),f.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(f.domElement)}function b(){var a=.001*Date.now(),c=new THREE.MeshBasicMaterial({color:new THREE.Color(Math.cos(a),Math.sin(a),-Math.sin(a))}),g=3,m=new THREE.CircleGeometry(i+20*Math.cos(a),g),n=new THREE.Mesh(m,c);n.position.x=k,n.position.y=l,n.position.z=10*h,n.rotation.z=j,j+=.1,h+=1,e.add(n),requestAnimationFrame(b),f.render(e,d),d.position.z+=10}function c(a){k=a.clientX-m,l=-(a.clientY-n)}console.log(e),THREE.NURBSCurve=function(a,b,c){this.degree=a,this.knots=b,this.controlPoints=[];for(var d=0;d<c.length;++d){var e=c[d];this.controlPoints[d]=new THREE.Vector4(e.x,e.y,e.z,e.w)}},THREE.NURBSCurve.prototype=Object.create(THREE.Curve.prototype),THREE.NURBSCurve.prototype.getPoint=function(a){var b=this.knots[0]+a*(this.knots[this.knots.length-1]-this.knots[0]),c=THREE.NURBSUtils.calcBSplinePoint(this.degree,this.knots,this.controlPoints,b);return 1!=c.w&&c.divideScalar(c.w),new THREE.Vector3(c.x,c.y,c.z)},THREE.NURBSCurve.prototype.getTangent=function(a){var b=this.knots[0]+a*(this.knots[this.knots.length-1]-this.knots[0]),c=THREE.NURBSUtils.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,b,1),d=c[1].clone();return d.normalize(),d},THREE.NURBSUtils={findSpan:function(a,b,c){var d=c.length-a-1;if(b>=c[d])return d-1;if(b<=c[a])return a;for(var e=a,f=d,g=Math.floor((e+f)/2);b<c[g]||b>=c[g+1];)b<c[g]?f=g:e=g,g=Math.floor((e+f)/2);return g},calcBasisFunctions:function(a,b,c,d){var e=[],f=[],g=[];e[0]=1;for(var h=1;c>=h;++h){f[h]=b-d[a+1-h],g[h]=d[a+h]-b;for(var i=0,j=0;h>j;++j){var k=g[j+1],l=f[h-j],m=e[j]/(k+l);e[j]=i+k*m,i=l*m}e[h]=i}return e},calcBSplinePoint:function(a,b,c,d){for(var e=this.findSpan(a,d,b),f=this.calcBasisFunctions(e,d,a,b),g=new THREE.Vector4(0,0,0,0),h=0;a>=h;++h){var i=c[e-a+h],j=f[h],k=i.w*j;g.x+=i.x*k,g.y+=i.y*k,g.z+=i.z*k,g.w+=i.w*j}return g},calcBasisFunctionDerivatives:function(a,b,c,d,e){for(var f=[],g=0;c>=g;++g)f[g]=0;for(var h=[],g=0;d>=g;++g)h[g]=f.slice(0);for(var i=[],g=0;c>=g;++g)i[g]=f.slice(0);i[0][0]=1;for(var j=f.slice(0),k=f.slice(0),l=1;c>=l;++l){j[l]=b-e[a+1-l],k[l]=e[a+l]-b;for(var m=0,n=0;l>n;++n){var o=k[n+1],p=j[l-n];i[l][n]=o+p;var q=i[n][l-1]/i[l][n];i[n][l]=m+o*q,m=p*q}i[l][l]=m}for(var l=0;c>=l;++l)h[0][l]=i[l][c];for(var n=0;c>=n;++n){for(var r=0,s=1,t=[],g=0;c>=g;++g)t[g]=f.slice(0);t[0][0]=1;for(var u=1;d>=u;++u){var v=0,w=n-u,x=c-u;n>=u&&(t[s][0]=t[r][0]/i[x+1][w],v=t[s][0]*i[w][x]);for(var y=w>=-1?1:-w,z=x>=n-1?u-1:c-n,l=y;z>=l;++l)t[s][l]=(t[r][l]-t[r][l-1])/i[x+1][w+l],v+=t[s][l]*i[w+l][x];x>=n&&(t[s][u]=-t[r][u-1]/i[x+1][n],v+=t[s][u]*i[n][x]),h[u][n]=v;var l=r;r=s,s=l}}for(var n=c,u=1;d>=u;++u){for(var l=0;c>=l;++l)h[u][l]*=n;n*=c-u}return h},calcBSplineDerivatives:function(a,b,c,d,e){for(var f=a>e?e:a,g=[],h=this.findSpan(a,d,b),i=this.calcBasisFunctionDerivatives(h,d,a,f,b),j=[],k=0;k<c.length;++k){var l=c[k].clone(),m=l.w;l.x*=m,l.y*=m,l.z*=m,j[k]=l}for(var n=0;f>=n;++n){for(var l=j[h-a].clone().multiplyScalar(i[n][0]),o=1;a>=o;++o)l.add(j[h-a+o].clone().multiplyScalar(i[n][o]));g[n]=l}for(var n=f+1;e+1>=n;++n)g[n]=new THREE.Vector4(0,0,0);return g},calcKoverI:function(a,b){for(var c=1,d=2;a>=d;++d)c*=d;for(var e=1,d=2;b>=d;++d)e*=d;for(var d=2;a-b>=d;++d)e*=d;return c/e},calcRationalCurveDerivatives:function(a){for(var b=a.length,c=[],d=[],e=0;b>e;++e){var f=a[e];c[e]=new THREE.Vector3(f.x,f.y,f.z),d[e]=f.w}for(var g=[],h=0;b>h;++h){for(var i=c[h].clone(),e=1;h>=e;++e)i.sub(g[h-e].clone().multiplyScalar(this.calcKoverI(h,e)*d[e]));g[h]=i.divideScalar(d[0])}return g},calcNURBSDerivatives:function(a,b,c,d,e){var f=this.calcBSplineDerivatives(a,b,c,d,e);return this.calcRationalCurveDerivatives(f)},calcSurfacePoint:function(a,b,c,d,e,f,g){for(var h=this.findSpan(a,f,c),i=this.findSpan(b,g,d),j=this.calcBasisFunctions(h,f,a,c),k=this.calcBasisFunctions(i,g,b,d),l=[],m=0;b>=m;++m){l[m]=new THREE.Vector4(0,0,0,0);for(var n=0;a>=n;++n){var o=e[h-a+n][i-b+m].clone(),p=o.w;o.x*=p,o.y*=p,o.z*=p,l[m].add(o.multiplyScalar(j[n]))}}for(var q=new THREE.Vector4(0,0,0,0),m=0;b>=m;++m)q.add(l[m].multiplyScalar(k[m]));return q.divideScalar(q.w),new THREE.Vector3(q.x,q.y,q.z)}};var d,e,f,g;a(),b(),document.addEventListener("mousemove",c,!1);var h=0,h=0,i=500,j=0,k=0,l=0,m=window.innerWidth/2,n=window.innerHeight/2}]),angular.module("champagneRocksApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/"}],a.isActive=function(a){return a===b.path()}}]);